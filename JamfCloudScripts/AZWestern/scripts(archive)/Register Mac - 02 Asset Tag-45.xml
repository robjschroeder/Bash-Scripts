<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<script>
    <id>45</id>
    <name>Register Mac - 02 Asset Tag</name>
    <category>No category assigned</category>
    <filename>Register Mac - 02 Asset Tag</filename>
    <info></info>
    <notes></notes>
    <priority>After</priority>
    <parameters></parameters>
    <os_requirements></os_requirements>
    <script_contents>#!/bin/bash

user_entry=""

validateResponce() {
    case "$user_entry" in
        "noinput" ) echo "empty input" &amp; askInput ;;
        "cancelled" ) echo "time out/cancelled" &amp; exit 1 ;;
        * ) echo "$user_entry"  ;;
    esac
}

askInput() {
user_entry=$(osascript &lt;&lt;EOF
use AppleScript version "2.4" -- Yosemite (10.10) or later
use scripting additions
set theTextReturned to "nil"
tell application "System Events"
activate
try
set theResponse to display dialog "Enter the asset tag of your computer" with title "Asset Tag" default answer ""
set theTextReturned to the text returned of theResponse
end try
if theTextReturned is "nil" then
return "cancelled"
else if theTextReturned is "" then
return "noinput"
else
return theTextReturned
end if
end tell
EOF
)
validateResponce "$user_entry"
}

askInput "$userName"


/usr/local/bin/jamf recon -assetTag $user_entry

exit 0


done</script_contents>
    <script_contents_encoded>IyEvYmluL2Jhc2gKCnVzZXJfZW50cnk9IiIKCnZhbGlkYXRlUmVzcG9uY2UoKSB7CiAgICBjYXNlICIkdXNlcl9lbnRyeSIgaW4KICAgICAgICAibm9pbnB1dCIgKSBlY2hvICJlbXB0eSBpbnB1dCIgJiBhc2tJbnB1dCA7OwogICAgICAgICJjYW5jZWxsZWQiICkgZWNobyAidGltZSBvdXQvY2FuY2VsbGVkIiAmIGV4aXQgMSA7OwogICAgICAgICogKSBlY2hvICIkdXNlcl9lbnRyeSIgIDs7CiAgICBlc2FjCn0KCmFza0lucHV0KCkgewp1c2VyX2VudHJ5PSQob3Nhc2NyaXB0IDw8RU9GCnVzZSBBcHBsZVNjcmlwdCB2ZXJzaW9uICIyLjQiIC0tIFlvc2VtaXRlICgxMC4xMCkgb3IgbGF0ZXIKdXNlIHNjcmlwdGluZyBhZGRpdGlvbnMKc2V0IHRoZVRleHRSZXR1cm5lZCB0byAibmlsIgp0ZWxsIGFwcGxpY2F0aW9uICJTeXN0ZW0gRXZlbnRzIgphY3RpdmF0ZQp0cnkKc2V0IHRoZVJlc3BvbnNlIHRvIGRpc3BsYXkgZGlhbG9nICJFbnRlciB0aGUgYXNzZXQgdGFnIG9mIHlvdXIgY29tcHV0ZXIiIHdpdGggdGl0bGUgIkFzc2V0IFRhZyIgZGVmYXVsdCBhbnN3ZXIgIiIKc2V0IHRoZVRleHRSZXR1cm5lZCB0byB0aGUgdGV4dCByZXR1cm5lZCBvZiB0aGVSZXNwb25zZQplbmQgdHJ5CmlmIHRoZVRleHRSZXR1cm5lZCBpcyAibmlsIiB0aGVuCnJldHVybiAiY2FuY2VsbGVkIgplbHNlIGlmIHRoZVRleHRSZXR1cm5lZCBpcyAiIiB0aGVuCnJldHVybiAibm9pbnB1dCIKZWxzZQpyZXR1cm4gdGhlVGV4dFJldHVybmVkCmVuZCBpZgplbmQgdGVsbApFT0YKKQp2YWxpZGF0ZVJlc3BvbmNlICIkdXNlcl9lbnRyeSIKfQoKYXNrSW5wdXQgIiR1c2VyTmFtZSIKCgovdXNyL2xvY2FsL2Jpbi9qYW1mIHJlY29uIC1hc3NldFRhZyAkdXNlcl9lbnRyeQoKZXhpdCAwCgoKZG9uZQ==</script_contents_encoded>
</script>