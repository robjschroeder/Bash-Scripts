<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<script>
    <id>18</id>
    <name>Applications - macOS Upgrade</name>
    <category>macOS</category>
    <filename>Applications - macOS Upgrade</filename>
    <info></info>
    <notes></notes>
    <priority>After</priority>
    <parameters>
        <parameter4>/Applications/Install macOS Catalina.app</parameter4>
        <parameter5>10.15.0</parameter5>
        <parameter6>(Leave Blank)</parameter6>
        <parameter7>(Leave Blank)</parameter7>
        <parameter8>EraseAndInstall - 0 = Disabled / 1 = Ena</parameter8>
        <parameter9>JAMF Helper - 0 = FullScreen / 1 = Utili</parameter9>
    </parameters>
    <os_requirements></os_requirements>
    <script_contents>#!/bin/bash

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#
# Copyright (c) 2019 Jamf.  All rights reserved.
#
#       Redistribution and use in source and binary forms, with or without
#       modification, are permitted provided that the following conditions are met:
#               * Redistributions of source code must retain the above copyright
#                 notice, this list of conditions and the following disclaimer.
#               * Redistributions in binary form must reproduce the above copyright
#                 notice, this list of conditions and the following disclaimer in the
#                 documentation and/or other materials provided with the distribution.
#               * Neither the name of the Jamf nor the names of its contributors may be
#                 used to endorse or promote products derived from this software without
#                 specific prior written permission.
#
#       THIS SOFTWARE IS PROVIDED BY JAMF SOFTWARE, LLC "AS IS" AND ANY
#       EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
#       WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
#       DISCLAIMED. IN NO EVENT SHALL JAMF SOFTWARE, LLC BE LIABLE FOR ANY
#       DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
#       (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
#       LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
#       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
#       (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
#       SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
#
# This script was designed to be used in a Self Service policy to ensure specific
# requirements have been met before proceeding with an inplace upgrade of the macOS,
# as well as to address changes Apple has made to the ability to complete macOS upgrades
# silently.
#
# REQUIREMENTS:
#           - Jamf Pro
#           - macOS Clients running version 10.10.5 or later
#           - macOS Installer 10.12.4 or later
#           - eraseInstall option is ONLY supported with macOS Installer 10.13.4+ and client-side macOS 10.13+
#           - Look over the USER VARIABLES and configure as needed.
#
#
# For more information, visit https://github.com/kc9wwh/macOSUpgrade
#
# Written by: Joshua Roskos | Jamf
#
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# USER VARIABLES
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

## Specify path to OS installer. Use Parameter 4 in the JSS, or specify here
## Example: /Applications/Install macOS High Sierra.app
OSInstaller="$4"

## Version of Installer OS. Use Parameter 5 in the JSS, or specify here.
## Example Command: /usr/libexec/PlistBuddy -c 'Print :"System Image Info":version' "/Applications/Install macOS High Sierra.app/Contents/SharedSupport/InstallInfo.plist"
## Example: 10.12.5
installerVersion="$5"
installerVersionMajor=$( /bin/echo "$installerVersion" | /usr/bin/awk -F. '{print $2}' )
installerVersionMinor=$( /bin/echo "$installerVersion" | /usr/bin/awk -F. '{print $3}' )

## Custom Trigger used for download. Use Parameter 6 in the JSS, or specify here.
## This should match a custom trigger for a policy that contains just the
## MacOS installer. Make sure that the policy is scoped properly
## to relevant computers and/or users, or else the custom trigger will
## not be picked up. Use a separate policy for the script itself.
## Example trigger name: download-sierra-install
download_trigger="$6"

## MD5 Checksum of InstallESD.dmg
## This variable is OPTIONAL
## Leave the variable BLANK if you do NOT want to verify the checksum (DEFAULT)
## Example Command: /sbin/md5 /Applications/Install\ macOS\ High\ Sierra.app/Contents/SharedSupport/InstallESD.dmg
## Example MD5 Checksum: b15b9db3a90f9ae8a9df0f81741efa2b
installESDChecksum="$7"

## Valid Checksum?  O (Default) for false, 1 for true.
validChecksum=0

## Unsuccessful Download?  0 (Default) for false, 1 for true.
unsuccessfulDownload=0

## Erase &amp; Install macOS (Factory Defaults)
## Requires macOS Installer 10.13.4 or later
## Disabled by default
## Options: 0 = Disabled / 1 = Enabled
## Use Parameter 8 in the JSS.
eraseInstall="$8"
if [ "$eraseInstall" != "1" ]; then eraseInstall=0 ; fi
# macOS Installer 10.13.3 or ealier set 0 to it.
if [ "$installerVersionMajor${installerVersionMinor:=0}" -lt 134 ]; then
    eraseInstall=0
fi

## Enter 0 for Full Screen, 1 for Utility window (screenshots available on GitHub)
## Full Screen by default
## Use Parameter 9 in the JSS.
userDialog="$9"
if [ "$userDialog" != "1" ]; then userDialog=0 ; fi

# Control for auth reboot execution.
if [ "$installerVersionMajor" -ge 14 ]; then
    # Installer of macOS 10.14 or later set cancel to auth reboot.
    cancelFVAuthReboot=1
else
    # Installer of macOS 10.13 or earlier try to do auth reboot.
    cancelFVAuthReboot=0
fi

## Title of OS
macOSname=$(/bin/echo "$OSInstaller" | /usr/bin/sed -E 's/(.+)?Install(.+)\.app\/?/\2/' | /usr/bin/xargs)

## Title to be used for userDialog (only applies to Utility Window)
title="$macOSname Upgrade"

## Heading to be used for userDialog
heading="Please wait as we prepare your computer for $macOSname..."

## Title to be used for userDialog
description="Your computer will reboot in 5-10 minutes and begin the upgrade.
This process will take approximately 30-40 minutes."

## Description to be used prior to downloading the OS installer
dldescription="We need to download $macOSname to your computer, this will \
take several minutes."

## Jamf Helper HUD Position if macOS Installer needs to be downloaded
## Options: ul (Upper Left); ll (Lower Left); ur (Upper Right); lr (Lower Right)
## Leave this variable empty for HUD to be centered on main screen
dlPosition="ul"

## Icon to be used for userDialog
## Default is macOS Installer logo which is included in the staged installer package
icon="$OSInstaller/Contents/Resources/InstallAssistant.icns"

## First run script to remove the installers after run installer
finishOSInstallScriptFilePath="/usr/local/jamfps/finishOSInstall.sh"

## Launch deamon settings for first run script to remove the installers after run installer
osinstallersetupdDaemonSettingsFilePath="/Library/LaunchDaemons/com.jamfps.cleanupOSInstall.plist"

## Launch agent settings for filevault authenticated reboots
osinstallersetupdAgentSettingsFilePath="/Library/LaunchAgents/com.apple.install.osinstallersetupd.plist"

## Amount of time (in seconds) to allow a user to connect to AC power before moving on
## If null or 0, then the user will not have the opportunity to connect to AC power
acPowerWaitTimer="0"

## Declare the sysRequirementErrors array
declare -a sysRequirementErrors=()

## Icon to display during the AC Power warning
warnIcon="/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/AlertCautionIcon.icns"

## Icon to display when errors are found
errorIcon="/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/AlertStopIcon.icns"

## The startossinstall log file path
osinstallLogfile="/var/log/startosinstall.log"

## caffeinatePID
caffeinatePID=""

## The startossinstall command option array
declare -a startosinstallOptions=()

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# FUNCTIONS
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

kill_process() {
    processPID="$1"
    if /bin/ps -p "$processPID" &gt; /dev/null ; then
        /bin/kill "$processPID"
        wait "$processPID" 2&gt;/dev/null
    fi
}

wait_for_ac_power() {
    local jamfHelperPowerPID
    jamfHelperPowerPID="$1"
    ## Loop for "acPowerWaitTimer" seconds until either AC Power is detected or the timer is up
    /bin/echo "Waiting for AC power..."
    while [[ "$acPowerWaitTimer" -gt "0" ]]; do
        if /usr/bin/pmset -g ps | /usr/bin/grep "AC Power" &gt; /dev/null ; then
            /bin/echo "Power Check: OK - AC Power Detected"
            kill_process "$jamfHelperPowerPID"
            return
        fi
        sleep 1
        ((acPowerWaitTimer--))
    done
    kill_process "$jamfHelperPowerPID"
    sysRequirementErrors+=("Is connected to AC power")
    /bin/echo "Power Check: ERROR - No AC Power Detected"
}

downloadInstaller() {
    /bin/echo "Downloading macOS Installer..."
    /Library/Application\ Support/JAMF/bin/jamfHelper.app/Contents/MacOS/jamfHelper \
        -windowType hud -windowPosition $dlPosition -title "$title" -alignHeading center -alignDescription left -description "$dldescription" \
        -lockHUD -icon "/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/SidebarDownloadsFolder.icns" -iconSize 100 &amp;
    ## Capture PID for Jamf Helper HUD
    jamfHUDPID=$!
    ## Run policy to cache installer
    /usr/local/jamf/bin/jamf policy -event "$download_trigger"
    ## Kill Jamf Helper HUD post download
    kill_process "$jamfHUDPID"
}

validate_power_status() {
    ## Check if device is on battery or ac power
    ## If not, and our acPowerWaitTimer is above 1, allow user to connect to power for specified time period
    if /usr/bin/pmset -g ps | /usr/bin/grep "AC Power" &gt; /dev/null ; then
        /bin/echo "Power Check: OK - AC Power Detected"
    else
        if [[ "$acPowerWaitTimer" -gt 0 ]]; then
            /Library/Application\ Support/JAMF/bin/jamfHelper.app/Contents/MacOS/jamfHelper -windowType utility -title "Waiting for AC Power Connection" -icon "$warnIcon" -description "Please connect your computer to power using an AC power adapter. This process will continue once AC power is detected." &amp;
            wait_for_ac_power "$!"
        else
            sysRequirementErrors+=("Is connected to AC power")
            /bin/echo "Power Check: ERROR - No AC Power Detected"
        fi
    fi
}

validate_free_space() {
    local installerMajor diskInfoPlist freeSpace requiredDiskSpaceSizeGB installerPath installerSizeBytes

    installerMajor="$1"
    installerPath="$2"

    diskInfoPlist=$(/usr/sbin/diskutil info -plist /)
    ## 10.13.4 or later, diskutil info command output changes key from 'AvailableSpace' to 'Free Space' about disk space.
    freeSpace=$(
    /usr/libexec/PlistBuddy -c "Print :FreeSpace" /dev/stdin &lt;&lt;&lt; "$diskInfoPlist" 2&gt;/dev/null || /usr/libexec/PlistBuddy -c "Print :AvailableSpace" /dev/stdin &lt;&lt;&lt; "$diskInfoPlist" 2&gt;/dev/null
    )

    ## The free space calculation also includes the installer, so it is excluded.
    if [ -e "$installerPath" ]; then
        installerSizeBytes=$(/usr/bin/du -s "$installerPath" | /usr/bin/awk '{print $1}' | /usr/bin/xargs)
        freeSpace=$((freeSpace + installerSizeBytes))
    fi

    ## Check if free space &gt; 15GB (install 10.13) or 20GB (install 10.14+)
    requiredDiskSpaceSizeGB=$([ "$installerMajor" -ge 14 ] &amp;&amp; /bin/echo "20" || /bin/echo "15")
    if [[ ${freeSpace%.*} -ge $(( requiredDiskSpaceSizeGB * 1000 * 1000 * 1000 )) ]]; then
        /bin/echo "Disk Check: OK - ${freeSpace%.*} Bytes Free Space Detected"
    else
        sysRequirementErrors+=("Has at least ${requiredDiskSpaceSizeGB}GB of Free Space")
        /bin/echo "Disk Check: ERROR - ${freeSpace%.*} Bytes Free Space Detected"
    fi
}

verifyChecksum() {
#    if [ -n "$installESDChecksum" ]; then
#        osChecksum=$( /sbin/md5 -q "$OSInstaller/Contents/SharedSupport/InstallESD.dmg" )
#        if [ "$osChecksum" = "$installESDChecksum" ]; then
#            /bin/echo "Checksum: Valid"
#            validChecksum=1
#            return
#        else
#            /bin/echo "Checksum: Not Valid"
##            /bin/echo "Beginning new dowload of installer"
##            /bin/rm -rf "$OSInstaller"
#            /bin/sleep 2
#            downloadInstaller
#        fi
#    else
#        ## Checksum not specified as script argument, assume true
#        validChecksum=1
        return
#    fi
}

cleanExit() {
    if [ -n "$caffeinatePID" ]; then
      kill_process "$caffeinatePID"
    fi
    ## Remove Script
    /bin/rm -f "$finishOSInstallScriptFilePath"
    /bin/rm -f "$osinstallersetupdDaemonSettingsFilePath"
    /bin/rm -f "$osinstallersetupdAgentSettingsFilePath"
    exit "$1"
}

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# SYSTEM CHECKS
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

## Caffeinate
/usr/bin/caffeinate -dis &amp;
caffeinatePID=$!

## Get Current User
currentUser=$( /usr/bin/stat -f %Su /dev/console )

## Check if FileVault Enabled
fvStatus=$( /usr/bin/fdesetup status | /usr/bin/head -1 )

## Run system requirement checks
validate_power_status
validate_free_space "$installerVersionMajor" "$OSInstaller"

## Don't waste the users time, exit here if system requirements are not met
if [[ "${#sysRequirementErrors[@]}" -ge 1 ]]; then
    /bin/echo "Launching jamfHelper Dialog (Requirements Not Met)..."
    /Library/Application\ Support/JAMF/bin/jamfHelper.app/Contents/MacOS/jamfHelper -windowType utility -title "$title" -icon "$errorIcon" -heading "Requirements Not Met" -description "We were unable to prepare your computer for $macOSname. Please ensure your computer meets the following requirements:
$( /usr/bin/printf '\t• %s\n' "${sysRequirementErrors[@]}" )
If you continue to experience this issue, please contact the IT Support Center." -iconSize 100 -button1 "OK" -defaultButton 1

    cleanExit 1
fi

## Check for existing OS installer
#loopCount=0
#while [ "$loopCount" -lt 3 ]; do
#    if [ -e "$OSInstaller" ]; then
#        /bin/echo "$OSInstaller found, checking version."
#        currentInstallerVersion=$(/usr/libexec/PlistBuddy -c 'Print :"System Image Info":version' "$OSInstaller/Contents/SharedSupport/InstallInfo.plist")
#        /bin/echo "Found macOS installer for version $currentInstallerVersion."
#        if [ "$currentInstallerVersion" = "$installerVersion" ]; then
#            /bin/echo "Installer found, version matches. Verifying checksum..."
#            verifyChecksum
#        else
#            ## Delete old version.
#            /bin/echo "Installer found, but old. Deleting..."
#            /bin/rm -rf "$OSInstaller"
#            /bin/sleep 2
#            downloadInstaller
#        fi
#        if [ "$validChecksum" -eq 1 ]; then
#            unsuccessfulDownload=0
#            break
#        fi
#    else
#        downloadInstaller
#    fi
#    unsuccessfulDownload=1
#    ((loopCount++))
#done

#if [ "$unsuccessfulDownload" -eq 1 ]; then
#    /bin/echo "macOS Installer Downloaded 3 Times - Checksum is Not Valid"
#    /bin/echo "Prompting user for error and exiting..."
#    /Library/Application\ Support/JAMF/bin/jamfHelper.app/Contents/MacOS/jamfHelper -windowType utility -title "$title" -icon "$errorIcon" -heading "Error Downloading $macOSname" -description "We were unable to prepare your computer for $macOSname. Please contact the IT Support Center." -iconSize 100 -button1 "OK" -defaultButton 1
#    cleanExit 0
#fi

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# CREATE FIRST BOOT SCRIPT
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

/bin/mkdir -p /usr/local/jamfps

/bin/cat &lt;&lt; EOF &gt; "$finishOSInstallScriptFilePath"
#!/bin/bash
## First Run Script to remove the installer.
## Clean up files
/bin/rm -fr "$OSInstaller"
## Update Device Inventory
/usr/local/jamf/bin/jamf recon
## Remove LaunchAgent and LaunchDaemon
/bin/rm -f "$osinstallersetupdAgentSettingsFilePath"
/bin/rm -f "$osinstallersetupdDaemonSettingsFilePath"
## Remove Script
/bin/rm -fr /usr/local/jamfps
exit 0
EOF

/usr/sbin/chown root:admin "$finishOSInstallScriptFilePath"
/bin/chmod 755 "$finishOSInstallScriptFilePath"

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# LAUNCH DAEMON
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

/bin/cat &lt;&lt; EOF &gt; "$osinstallersetupdDaemonSettingsFilePath"
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.jamfps.cleanupOSInstall&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;/bin/bash&lt;/string&gt;
        &lt;string&gt;-c&lt;/string&gt;
        &lt;string&gt;$finishOSInstallScriptFilePath&lt;/string&gt;
    &lt;/array&gt;
    &lt;key&gt;RunAtLoad&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;
&lt;/plist&gt;
EOF

## Set the permission on the file just made.
/usr/sbin/chown root:wheel "$osinstallersetupdDaemonSettingsFilePath"
/bin/chmod 644 "$osinstallersetupdDaemonSettingsFilePath"

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# LAUNCH AGENT FOR FILEVAULT AUTHENTICATED REBOOTS
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
if [ "$cancelFVAuthReboot" -eq 0 ]; then
    ## Determine Program Argument
    if [ "$installerVersionMajor" -ge 11 ]; then
        progArgument="osinstallersetupd"
    elif [ "$installerVersionMajor" -eq 10 ]; then
        progArgument="osinstallersetupplaind"
    fi

    /bin/cat &lt;&lt; EOP &gt; "$osinstallersetupdAgentSettingsFilePath"
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;
&lt;plist version="1.0"&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.apple.install.osinstallersetupd&lt;/string&gt;
    &lt;key&gt;LimitLoadToSessionType&lt;/key&gt;
    &lt;string&gt;Aqua&lt;/string&gt;
    &lt;key&gt;MachServices&lt;/key&gt;
    &lt;dict&gt;
        &lt;key&gt;com.apple.install.osinstallersetupd&lt;/key&gt;
        &lt;true/&gt;
    &lt;/dict&gt;
    &lt;key&gt;TimeOut&lt;/key&gt;
    &lt;integer&gt;300&lt;/integer&gt;
    &lt;key&gt;OnDemand&lt;/key&gt;
    &lt;true/&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;$OSInstaller/Contents/Frameworks/OSInstallerSetup.framework/Resources/$progArgument&lt;/string&gt;
    &lt;/array&gt;
&lt;/dict&gt;
&lt;/plist&gt;
EOP

    ## Set the permission on the file just made.
    /usr/sbin/chown root:wheel "$osinstallersetupdAgentSettingsFilePath"
    /bin/chmod 644 "$osinstallersetupdAgentSettingsFilePath"

fi

# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# APPLICATION
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

## Launch jamfHelper
jamfHelperPID=""
if [ "$userDialog" -eq 0 ]; then
    /bin/echo "Launching jamfHelper as FullScreen..."
    /Library/Application\ Support/JAMF/bin/jamfHelper.app/Contents/MacOS/jamfHelper -windowType fs -title "" -icon "$icon" -heading "$heading" -description "$description" &amp;
    jamfHelperPID=$!
else
    /bin/echo "Launching jamfHelper as Utility Window..."
    /Library/Application\ Support/JAMF/bin/jamfHelper.app/Contents/MacOS/jamfHelper -windowType utility -title "$title" -icon "$icon" -heading "$heading" -description "$description" -iconSize 100 &amp;
    jamfHelperPID=$!
fi

## Load LaunchAgent
if [ "$fvStatus" = "FileVault is On." ] &amp;&amp; \
   [ "$currentUser" != "root" ] &amp;&amp; \
   [ "$cancelFVAuthReboot" -eq 0 ] ; then
    userID=$( /usr/bin/id -u "${currentUser}" )
    /bin/launchctl bootstrap gui/"${userID}" /Library/LaunchAgents/com.apple.install.osinstallersetupd.plist
fi

## Set required startosinstall options
startosinstallOptions+=(
"--agreetolicense"
"--nointeraction"
"--pidtosignal $jamfHelperPID"
)

## Set version specific startosinstall options
#if [ "$installerVersionMajor" -lt 14 ]; then
    # This variable may have space. Therefore, escape value with duble quotation
#    startosinstallOptions+=("--applicationpath \"$OSInstaller\"")
#fi

## Check if eraseInstall is Enabled
if [ "$eraseInstall" -eq 1 ]; then
    startosinstallOptions+=("--eraseinstall")
    /bin/echo "Script is configured for Erase and Install of macOS."
fi

## Begin Upgrade
startosinstallCommand="\"$OSInstaller/Contents/Resources/startosinstall\" ${startosinstallOptions[*]} &gt;&gt; $osinstallLogfile 2&gt;&amp;1 &amp;"
/bin/echo "Running a command as '$startosinstallCommand'..."
eval "$startosinstallCommand"

/bin/sleep 3

cleanExit 0</script_contents>
    <script_contents_encoded>IyEvYmluL2Jhc2gKCiMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMKIwojIENvcHlyaWdodCAoYykgMjAxOSBKYW1mLiAgQWxsIHJpZ2h0cyByZXNlcnZlZC4KIwojICAgICAgIFJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dAojICAgICAgIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OgojICAgICAgICAgICAgICAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodAojICAgICAgICAgICAgICAgICBub3RpY2UsIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuCiMgICAgICAgICAgICAgICAqIFJlZGlzdHJpYnV0aW9ucyBpbiBiaW5hcnkgZm9ybSBtdXN0IHJlcHJvZHVjZSB0aGUgYWJvdmUgY29weXJpZ2h0CiMgICAgICAgICAgICAgICAgIG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUKIyAgICAgICAgICAgICAgICAgZG9jdW1lbnRhdGlvbiBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi4KIyAgICAgICAgICAgICAgICogTmVpdGhlciB0aGUgbmFtZSBvZiB0aGUgSmFtZiBub3IgdGhlIG5hbWVzIG9mIGl0cyBjb250cmlidXRvcnMgbWF5IGJlCiMgICAgICAgICAgICAgICAgIHVzZWQgdG8gZW5kb3JzZSBvciBwcm9tb3RlIHByb2R1Y3RzIGRlcml2ZWQgZnJvbSB0aGlzIHNvZnR3YXJlIHdpdGhvdXQKIyAgICAgICAgICAgICAgICAgc3BlY2lmaWMgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uLgojCiMgICAgICAgVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBKQU1GIFNPRlRXQVJFLCBMTEMgIkFTIElTIiBBTkQgQU5ZCiMgICAgICAgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRAojICAgICAgIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZIEFORCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUKIyAgICAgICBESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBKQU1GIFNPRlRXQVJFLCBMTEMgQkUgTElBQkxFIEZPUiBBTlkKIyAgICAgICBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUwojICAgICAgIChJTkNMVURJTkcsIEJVVCBOT1QgTElNSVRFRCBUTywgUFJPQ1VSRU1FTlQgT0YgU1VCU1RJVFVURSBHT09EUyBPUiBTRVJWSUNFUzsKIyAgICAgICBMT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQKIyAgICAgICBPTiBBTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVAojICAgICAgIChJTkNMVURJTkcgTkVHTElHRU5DRSBPUiBPVEhFUldJU0UpIEFSSVNJTkcgSU4gQU5ZIFdBWSBPVVQgT0YgVEhFIFVTRSBPRiBUSElTCiMgICAgICAgU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuCiMKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwoKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwojCiMgVGhpcyBzY3JpcHQgd2FzIGRlc2lnbmVkIHRvIGJlIHVzZWQgaW4gYSBTZWxmIFNlcnZpY2UgcG9saWN5IHRvIGVuc3VyZSBzcGVjaWZpYwojIHJlcXVpcmVtZW50cyBoYXZlIGJlZW4gbWV0IGJlZm9yZSBwcm9jZWVkaW5nIHdpdGggYW4gaW5wbGFjZSB1cGdyYWRlIG9mIHRoZSBtYWNPUywKIyBhcyB3ZWxsIGFzIHRvIGFkZHJlc3MgY2hhbmdlcyBBcHBsZSBoYXMgbWFkZSB0byB0aGUgYWJpbGl0eSB0byBjb21wbGV0ZSBtYWNPUyB1cGdyYWRlcwojIHNpbGVudGx5LgojCiMgUkVRVUlSRU1FTlRTOgojICAgICAgICAgICAtIEphbWYgUHJvCiMgICAgICAgICAgIC0gbWFjT1MgQ2xpZW50cyBydW5uaW5nIHZlcnNpb24gMTAuMTAuNSBvciBsYXRlcgojICAgICAgICAgICAtIG1hY09TIEluc3RhbGxlciAxMC4xMi40IG9yIGxhdGVyCiMgICAgICAgICAgIC0gZXJhc2VJbnN0YWxsIG9wdGlvbiBpcyBPTkxZIHN1cHBvcnRlZCB3aXRoIG1hY09TIEluc3RhbGxlciAxMC4xMy40KyBhbmQgY2xpZW50LXNpZGUgbWFjT1MgMTAuMTMrCiMgICAgICAgICAgIC0gTG9vayBvdmVyIHRoZSBVU0VSIFZBUklBQkxFUyBhbmQgY29uZmlndXJlIGFzIG5lZWRlZC4KIwojCiMgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHZpc2l0IGh0dHBzOi8vZ2l0aHViLmNvbS9rYzl3d2gvbWFjT1NVcGdyYWRlCiMKIyBXcml0dGVuIGJ5OiBKb3NodWEgUm9za29zIHwgSmFtZgojCiMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMKCiMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMKIyBVU0VSIFZBUklBQkxFUwojICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjCgojIyBTcGVjaWZ5IHBhdGggdG8gT1MgaW5zdGFsbGVyLiBVc2UgUGFyYW1ldGVyIDQgaW4gdGhlIEpTUywgb3Igc3BlY2lmeSBoZXJlCiMjIEV4YW1wbGU6IC9BcHBsaWNhdGlvbnMvSW5zdGFsbCBtYWNPUyBIaWdoIFNpZXJyYS5hcHAKT1NJbnN0YWxsZXI9IiQ0IgoKIyMgVmVyc2lvbiBvZiBJbnN0YWxsZXIgT1MuIFVzZSBQYXJhbWV0ZXIgNSBpbiB0aGUgSlNTLCBvciBzcGVjaWZ5IGhlcmUuCiMjIEV4YW1wbGUgQ29tbWFuZDogL3Vzci9saWJleGVjL1BsaXN0QnVkZHkgLWMgJ1ByaW50IDoiU3lzdGVtIEltYWdlIEluZm8iOnZlcnNpb24nICIvQXBwbGljYXRpb25zL0luc3RhbGwgbWFjT1MgSGlnaCBTaWVycmEuYXBwL0NvbnRlbnRzL1NoYXJlZFN1cHBvcnQvSW5zdGFsbEluZm8ucGxpc3QiCiMjIEV4YW1wbGU6IDEwLjEyLjUKaW5zdGFsbGVyVmVyc2lvbj0iJDUiCmluc3RhbGxlclZlcnNpb25NYWpvcj0kKCAvYmluL2VjaG8gIiRpbnN0YWxsZXJWZXJzaW9uIiB8IC91c3IvYmluL2F3ayAtRi4gJ3twcmludCAkMn0nICkKaW5zdGFsbGVyVmVyc2lvbk1pbm9yPSQoIC9iaW4vZWNobyAiJGluc3RhbGxlclZlcnNpb24iIHwgL3Vzci9iaW4vYXdrIC1GLiAne3ByaW50ICQzfScgKQoKIyMgQ3VzdG9tIFRyaWdnZXIgdXNlZCBmb3IgZG93bmxvYWQuIFVzZSBQYXJhbWV0ZXIgNiBpbiB0aGUgSlNTLCBvciBzcGVjaWZ5IGhlcmUuCiMjIFRoaXMgc2hvdWxkIG1hdGNoIGEgY3VzdG9tIHRyaWdnZXIgZm9yIGEgcG9saWN5IHRoYXQgY29udGFpbnMganVzdCB0aGUKIyMgTWFjT1MgaW5zdGFsbGVyLiBNYWtlIHN1cmUgdGhhdCB0aGUgcG9saWN5IGlzIHNjb3BlZCBwcm9wZXJseQojIyB0byByZWxldmFudCBjb21wdXRlcnMgYW5kL29yIHVzZXJzLCBvciBlbHNlIHRoZSBjdXN0b20gdHJpZ2dlciB3aWxsCiMjIG5vdCBiZSBwaWNrZWQgdXAuIFVzZSBhIHNlcGFyYXRlIHBvbGljeSBmb3IgdGhlIHNjcmlwdCBpdHNlbGYuCiMjIEV4YW1wbGUgdHJpZ2dlciBuYW1lOiBkb3dubG9hZC1zaWVycmEtaW5zdGFsbApkb3dubG9hZF90cmlnZ2VyPSIkNiIKCiMjIE1ENSBDaGVja3N1bSBvZiBJbnN0YWxsRVNELmRtZwojIyBUaGlzIHZhcmlhYmxlIGlzIE9QVElPTkFMCiMjIExlYXZlIHRoZSB2YXJpYWJsZSBCTEFOSyBpZiB5b3UgZG8gTk9UIHdhbnQgdG8gdmVyaWZ5IHRoZSBjaGVja3N1bSAoREVGQVVMVCkKIyMgRXhhbXBsZSBDb21tYW5kOiAvc2Jpbi9tZDUgL0FwcGxpY2F0aW9ucy9JbnN0YWxsXCBtYWNPU1wgSGlnaFwgU2llcnJhLmFwcC9Db250ZW50cy9TaGFyZWRTdXBwb3J0L0luc3RhbGxFU0QuZG1nCiMjIEV4YW1wbGUgTUQ1IENoZWNrc3VtOiBiMTViOWRiM2E5MGY5YWU4YTlkZjBmODE3NDFlZmEyYgppbnN0YWxsRVNEQ2hlY2tzdW09IiQ3IgoKIyMgVmFsaWQgQ2hlY2tzdW0/ICBPIChEZWZhdWx0KSBmb3IgZmFsc2UsIDEgZm9yIHRydWUuCnZhbGlkQ2hlY2tzdW09MAoKIyMgVW5zdWNjZXNzZnVsIERvd25sb2FkPyAgMCAoRGVmYXVsdCkgZm9yIGZhbHNlLCAxIGZvciB0cnVlLgp1bnN1Y2Nlc3NmdWxEb3dubG9hZD0wCgojIyBFcmFzZSAmIEluc3RhbGwgbWFjT1MgKEZhY3RvcnkgRGVmYXVsdHMpCiMjIFJlcXVpcmVzIG1hY09TIEluc3RhbGxlciAxMC4xMy40IG9yIGxhdGVyCiMjIERpc2FibGVkIGJ5IGRlZmF1bHQKIyMgT3B0aW9uczogMCA9IERpc2FibGVkIC8gMSA9IEVuYWJsZWQKIyMgVXNlIFBhcmFtZXRlciA4IGluIHRoZSBKU1MuCmVyYXNlSW5zdGFsbD0iJDgiCmlmIFsgIiRlcmFzZUluc3RhbGwiICE9ICIxIiBdOyB0aGVuIGVyYXNlSW5zdGFsbD0wIDsgZmkKIyBtYWNPUyBJbnN0YWxsZXIgMTAuMTMuMyBvciBlYWxpZXIgc2V0IDAgdG8gaXQuCmlmIFsgIiRpbnN0YWxsZXJWZXJzaW9uTWFqb3Ike2luc3RhbGxlclZlcnNpb25NaW5vcjo9MH0iIC1sdCAxMzQgXTsgdGhlbgogICAgZXJhc2VJbnN0YWxsPTAKZmkKCiMjIEVudGVyIDAgZm9yIEZ1bGwgU2NyZWVuLCAxIGZvciBVdGlsaXR5IHdpbmRvdyAoc2NyZWVuc2hvdHMgYXZhaWxhYmxlIG9uIEdpdEh1YikKIyMgRnVsbCBTY3JlZW4gYnkgZGVmYXVsdAojIyBVc2UgUGFyYW1ldGVyIDkgaW4gdGhlIEpTUy4KdXNlckRpYWxvZz0iJDkiCmlmIFsgIiR1c2VyRGlhbG9nIiAhPSAiMSIgXTsgdGhlbiB1c2VyRGlhbG9nPTAgOyBmaQoKIyBDb250cm9sIGZvciBhdXRoIHJlYm9vdCBleGVjdXRpb24uCmlmIFsgIiRpbnN0YWxsZXJWZXJzaW9uTWFqb3IiIC1nZSAxNCBdOyB0aGVuCiAgICAjIEluc3RhbGxlciBvZiBtYWNPUyAxMC4xNCBvciBsYXRlciBzZXQgY2FuY2VsIHRvIGF1dGggcmVib290LgogICAgY2FuY2VsRlZBdXRoUmVib290PTEKZWxzZQogICAgIyBJbnN0YWxsZXIgb2YgbWFjT1MgMTAuMTMgb3IgZWFybGllciB0cnkgdG8gZG8gYXV0aCByZWJvb3QuCiAgICBjYW5jZWxGVkF1dGhSZWJvb3Q9MApmaQoKIyMgVGl0bGUgb2YgT1MKbWFjT1NuYW1lPSQoL2Jpbi9lY2hvICIkT1NJbnN0YWxsZXIiIHwgL3Vzci9iaW4vc2VkIC1FICdzLyguKyk/SW5zdGFsbCguKylcLmFwcFwvPy9cMi8nIHwgL3Vzci9iaW4veGFyZ3MpCgojIyBUaXRsZSB0byBiZSB1c2VkIGZvciB1c2VyRGlhbG9nIChvbmx5IGFwcGxpZXMgdG8gVXRpbGl0eSBXaW5kb3cpCnRpdGxlPSIkbWFjT1NuYW1lIFVwZ3JhZGUiCgojIyBIZWFkaW5nIHRvIGJlIHVzZWQgZm9yIHVzZXJEaWFsb2cKaGVhZGluZz0iUGxlYXNlIHdhaXQgYXMgd2UgcHJlcGFyZSB5b3VyIGNvbXB1dGVyIGZvciAkbWFjT1NuYW1lLi4uIgoKIyMgVGl0bGUgdG8gYmUgdXNlZCBmb3IgdXNlckRpYWxvZwpkZXNjcmlwdGlvbj0iWW91ciBjb21wdXRlciB3aWxsIHJlYm9vdCBpbiA1LTEwIG1pbnV0ZXMgYW5kIGJlZ2luIHRoZSB1cGdyYWRlLgpUaGlzIHByb2Nlc3Mgd2lsbCB0YWtlIGFwcHJveGltYXRlbHkgMzAtNDAgbWludXRlcy4iCgojIyBEZXNjcmlwdGlvbiB0byBiZSB1c2VkIHByaW9yIHRvIGRvd25sb2FkaW5nIHRoZSBPUyBpbnN0YWxsZXIKZGxkZXNjcmlwdGlvbj0iV2UgbmVlZCB0byBkb3dubG9hZCAkbWFjT1NuYW1lIHRvIHlvdXIgY29tcHV0ZXIsIHRoaXMgd2lsbCBcCnRha2Ugc2V2ZXJhbCBtaW51dGVzLiIKCiMjIEphbWYgSGVscGVyIEhVRCBQb3NpdGlvbiBpZiBtYWNPUyBJbnN0YWxsZXIgbmVlZHMgdG8gYmUgZG93bmxvYWRlZAojIyBPcHRpb25zOiB1bCAoVXBwZXIgTGVmdCk7IGxsIChMb3dlciBMZWZ0KTsgdXIgKFVwcGVyIFJpZ2h0KTsgbHIgKExvd2VyIFJpZ2h0KQojIyBMZWF2ZSB0aGlzIHZhcmlhYmxlIGVtcHR5IGZvciBIVUQgdG8gYmUgY2VudGVyZWQgb24gbWFpbiBzY3JlZW4KZGxQb3NpdGlvbj0idWwiCgojIyBJY29uIHRvIGJlIHVzZWQgZm9yIHVzZXJEaWFsb2cKIyMgRGVmYXVsdCBpcyBtYWNPUyBJbnN0YWxsZXIgbG9nbyB3aGljaCBpcyBpbmNsdWRlZCBpbiB0aGUgc3RhZ2VkIGluc3RhbGxlciBwYWNrYWdlCmljb249IiRPU0luc3RhbGxlci9Db250ZW50cy9SZXNvdXJjZXMvSW5zdGFsbEFzc2lzdGFudC5pY25zIgoKIyMgRmlyc3QgcnVuIHNjcmlwdCB0byByZW1vdmUgdGhlIGluc3RhbGxlcnMgYWZ0ZXIgcnVuIGluc3RhbGxlcgpmaW5pc2hPU0luc3RhbGxTY3JpcHRGaWxlUGF0aD0iL3Vzci9sb2NhbC9qYW1mcHMvZmluaXNoT1NJbnN0YWxsLnNoIgoKIyMgTGF1bmNoIGRlYW1vbiBzZXR0aW5ncyBmb3IgZmlyc3QgcnVuIHNjcmlwdCB0byByZW1vdmUgdGhlIGluc3RhbGxlcnMgYWZ0ZXIgcnVuIGluc3RhbGxlcgpvc2luc3RhbGxlcnNldHVwZERhZW1vblNldHRpbmdzRmlsZVBhdGg9Ii9MaWJyYXJ5L0xhdW5jaERhZW1vbnMvY29tLmphbWZwcy5jbGVhbnVwT1NJbnN0YWxsLnBsaXN0IgoKIyMgTGF1bmNoIGFnZW50IHNldHRpbmdzIGZvciBmaWxldmF1bHQgYXV0aGVudGljYXRlZCByZWJvb3RzCm9zaW5zdGFsbGVyc2V0dXBkQWdlbnRTZXR0aW5nc0ZpbGVQYXRoPSIvTGlicmFyeS9MYXVuY2hBZ2VudHMvY29tLmFwcGxlLmluc3RhbGwub3NpbnN0YWxsZXJzZXR1cGQucGxpc3QiCgojIyBBbW91bnQgb2YgdGltZSAoaW4gc2Vjb25kcykgdG8gYWxsb3cgYSB1c2VyIHRvIGNvbm5lY3QgdG8gQUMgcG93ZXIgYmVmb3JlIG1vdmluZyBvbgojIyBJZiBudWxsIG9yIDAsIHRoZW4gdGhlIHVzZXIgd2lsbCBub3QgaGF2ZSB0aGUgb3Bwb3J0dW5pdHkgdG8gY29ubmVjdCB0byBBQyBwb3dlcgphY1Bvd2VyV2FpdFRpbWVyPSIwIgoKIyMgRGVjbGFyZSB0aGUgc3lzUmVxdWlyZW1lbnRFcnJvcnMgYXJyYXkKZGVjbGFyZSAtYSBzeXNSZXF1aXJlbWVudEVycm9ycz0oKQoKIyMgSWNvbiB0byBkaXNwbGF5IGR1cmluZyB0aGUgQUMgUG93ZXIgd2FybmluZwp3YXJuSWNvbj0iL1N5c3RlbS9MaWJyYXJ5L0NvcmVTZXJ2aWNlcy9Db3JlVHlwZXMuYnVuZGxlL0NvbnRlbnRzL1Jlc291cmNlcy9BbGVydENhdXRpb25JY29uLmljbnMiCgojIyBJY29uIHRvIGRpc3BsYXkgd2hlbiBlcnJvcnMgYXJlIGZvdW5kCmVycm9ySWNvbj0iL1N5c3RlbS9MaWJyYXJ5L0NvcmVTZXJ2aWNlcy9Db3JlVHlwZXMuYnVuZGxlL0NvbnRlbnRzL1Jlc291cmNlcy9BbGVydFN0b3BJY29uLmljbnMiCgojIyBUaGUgc3RhcnRvc3NpbnN0YWxsIGxvZyBmaWxlIHBhdGgKb3NpbnN0YWxsTG9nZmlsZT0iL3Zhci9sb2cvc3RhcnRvc2luc3RhbGwubG9nIgoKIyMgY2FmZmVpbmF0ZVBJRApjYWZmZWluYXRlUElEPSIiCgojIyBUaGUgc3RhcnRvc3NpbnN0YWxsIGNvbW1hbmQgb3B0aW9uIGFycmF5CmRlY2xhcmUgLWEgc3RhcnRvc2luc3RhbGxPcHRpb25zPSgpCgojICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjCiMgRlVOQ1RJT05TCiMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMKCmtpbGxfcHJvY2VzcygpIHsKICAgIHByb2Nlc3NQSUQ9IiQxIgogICAgaWYgL2Jpbi9wcyAtcCAiJHByb2Nlc3NQSUQiID4gL2Rldi9udWxsIDsgdGhlbgogICAgICAgIC9iaW4va2lsbCAiJHByb2Nlc3NQSUQiCiAgICAgICAgd2FpdCAiJHByb2Nlc3NQSUQiIDI+L2Rldi9udWxsCiAgICBmaQp9Cgp3YWl0X2Zvcl9hY19wb3dlcigpIHsKICAgIGxvY2FsIGphbWZIZWxwZXJQb3dlclBJRAogICAgamFtZkhlbHBlclBvd2VyUElEPSIkMSIKICAgICMjIExvb3AgZm9yICJhY1Bvd2VyV2FpdFRpbWVyIiBzZWNvbmRzIHVudGlsIGVpdGhlciBBQyBQb3dlciBpcyBkZXRlY3RlZCBvciB0aGUgdGltZXIgaXMgdXAKICAgIC9iaW4vZWNobyAiV2FpdGluZyBmb3IgQUMgcG93ZXIuLi4iCiAgICB3aGlsZSBbWyAiJGFjUG93ZXJXYWl0VGltZXIiIC1ndCAiMCIgXV07IGRvCiAgICAgICAgaWYgL3Vzci9iaW4vcG1zZXQgLWcgcHMgfCAvdXNyL2Jpbi9ncmVwICJBQyBQb3dlciIgPiAvZGV2L251bGwgOyB0aGVuCiAgICAgICAgICAgIC9iaW4vZWNobyAiUG93ZXIgQ2hlY2s6IE9LIC0gQUMgUG93ZXIgRGV0ZWN0ZWQiCiAgICAgICAgICAgIGtpbGxfcHJvY2VzcyAiJGphbWZIZWxwZXJQb3dlclBJRCIKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZmkKICAgICAgICBzbGVlcCAxCiAgICAgICAgKChhY1Bvd2VyV2FpdFRpbWVyLS0pKQogICAgZG9uZQogICAga2lsbF9wcm9jZXNzICIkamFtZkhlbHBlclBvd2VyUElEIgogICAgc3lzUmVxdWlyZW1lbnRFcnJvcnMrPSgiSXMgY29ubmVjdGVkIHRvIEFDIHBvd2VyIikKICAgIC9iaW4vZWNobyAiUG93ZXIgQ2hlY2s6IEVSUk9SIC0gTm8gQUMgUG93ZXIgRGV0ZWN0ZWQiCn0KCmRvd25sb2FkSW5zdGFsbGVyKCkgewogICAgL2Jpbi9lY2hvICJEb3dubG9hZGluZyBtYWNPUyBJbnN0YWxsZXIuLi4iCiAgICAvTGlicmFyeS9BcHBsaWNhdGlvblwgU3VwcG9ydC9KQU1GL2Jpbi9qYW1mSGVscGVyLmFwcC9Db250ZW50cy9NYWNPUy9qYW1mSGVscGVyIFwKICAgICAgICAtd2luZG93VHlwZSBodWQgLXdpbmRvd1Bvc2l0aW9uICRkbFBvc2l0aW9uIC10aXRsZSAiJHRpdGxlIiAtYWxpZ25IZWFkaW5nIGNlbnRlciAtYWxpZ25EZXNjcmlwdGlvbiBsZWZ0IC1kZXNjcmlwdGlvbiAiJGRsZGVzY3JpcHRpb24iIFwKICAgICAgICAtbG9ja0hVRCAtaWNvbiAiL1N5c3RlbS9MaWJyYXJ5L0NvcmVTZXJ2aWNlcy9Db3JlVHlwZXMuYnVuZGxlL0NvbnRlbnRzL1Jlc291cmNlcy9TaWRlYmFyRG93bmxvYWRzRm9sZGVyLmljbnMiIC1pY29uU2l6ZSAxMDAgJgogICAgIyMgQ2FwdHVyZSBQSUQgZm9yIEphbWYgSGVscGVyIEhVRAogICAgamFtZkhVRFBJRD0kIQogICAgIyMgUnVuIHBvbGljeSB0byBjYWNoZSBpbnN0YWxsZXIKICAgIC91c3IvbG9jYWwvamFtZi9iaW4vamFtZiBwb2xpY3kgLWV2ZW50ICIkZG93bmxvYWRfdHJpZ2dlciIKICAgICMjIEtpbGwgSmFtZiBIZWxwZXIgSFVEIHBvc3QgZG93bmxvYWQKICAgIGtpbGxfcHJvY2VzcyAiJGphbWZIVURQSUQiCn0KCnZhbGlkYXRlX3Bvd2VyX3N0YXR1cygpIHsKICAgICMjIENoZWNrIGlmIGRldmljZSBpcyBvbiBiYXR0ZXJ5IG9yIGFjIHBvd2VyCiAgICAjIyBJZiBub3QsIGFuZCBvdXIgYWNQb3dlcldhaXRUaW1lciBpcyBhYm92ZSAxLCBhbGxvdyB1c2VyIHRvIGNvbm5lY3QgdG8gcG93ZXIgZm9yIHNwZWNpZmllZCB0aW1lIHBlcmlvZAogICAgaWYgL3Vzci9iaW4vcG1zZXQgLWcgcHMgfCAvdXNyL2Jpbi9ncmVwICJBQyBQb3dlciIgPiAvZGV2L251bGwgOyB0aGVuCiAgICAgICAgL2Jpbi9lY2hvICJQb3dlciBDaGVjazogT0sgLSBBQyBQb3dlciBEZXRlY3RlZCIKICAgIGVsc2UKICAgICAgICBpZiBbWyAiJGFjUG93ZXJXYWl0VGltZXIiIC1ndCAwIF1dOyB0aGVuCiAgICAgICAgICAgIC9MaWJyYXJ5L0FwcGxpY2F0aW9uXCBTdXBwb3J0L0pBTUYvYmluL2phbWZIZWxwZXIuYXBwL0NvbnRlbnRzL01hY09TL2phbWZIZWxwZXIgLXdpbmRvd1R5cGUgdXRpbGl0eSAtdGl0bGUgIldhaXRpbmcgZm9yIEFDIFBvd2VyIENvbm5lY3Rpb24iIC1pY29uICIkd2Fybkljb24iIC1kZXNjcmlwdGlvbiAiUGxlYXNlIGNvbm5lY3QgeW91ciBjb21wdXRlciB0byBwb3dlciB1c2luZyBhbiBBQyBwb3dlciBhZGFwdGVyLiBUaGlzIHByb2Nlc3Mgd2lsbCBjb250aW51ZSBvbmNlIEFDIHBvd2VyIGlzIGRldGVjdGVkLiIgJgogICAgICAgICAgICB3YWl0X2Zvcl9hY19wb3dlciAiJCEiCiAgICAgICAgZWxzZQogICAgICAgICAgICBzeXNSZXF1aXJlbWVudEVycm9ycys9KCJJcyBjb25uZWN0ZWQgdG8gQUMgcG93ZXIiKQogICAgICAgICAgICAvYmluL2VjaG8gIlBvd2VyIENoZWNrOiBFUlJPUiAtIE5vIEFDIFBvd2VyIERldGVjdGVkIgogICAgICAgIGZpCiAgICBmaQp9Cgp2YWxpZGF0ZV9mcmVlX3NwYWNlKCkgewogICAgbG9jYWwgaW5zdGFsbGVyTWFqb3IgZGlza0luZm9QbGlzdCBmcmVlU3BhY2UgcmVxdWlyZWREaXNrU3BhY2VTaXplR0IgaW5zdGFsbGVyUGF0aCBpbnN0YWxsZXJTaXplQnl0ZXMKCiAgICBpbnN0YWxsZXJNYWpvcj0iJDEiCiAgICBpbnN0YWxsZXJQYXRoPSIkMiIKCiAgICBkaXNrSW5mb1BsaXN0PSQoL3Vzci9zYmluL2Rpc2t1dGlsIGluZm8gLXBsaXN0IC8pCiAgICAjIyAxMC4xMy40IG9yIGxhdGVyLCBkaXNrdXRpbCBpbmZvIGNvbW1hbmQgb3V0cHV0IGNoYW5nZXMga2V5IGZyb20gJ0F2YWlsYWJsZVNwYWNlJyB0byAnRnJlZSBTcGFjZScgYWJvdXQgZGlzayBzcGFjZS4KICAgIGZyZWVTcGFjZT0kKAogICAgL3Vzci9saWJleGVjL1BsaXN0QnVkZHkgLWMgIlByaW50IDpGcmVlU3BhY2UiIC9kZXYvc3RkaW4gPDw8ICIkZGlza0luZm9QbGlzdCIgMj4vZGV2L251bGwgfHwgL3Vzci9saWJleGVjL1BsaXN0QnVkZHkgLWMgIlByaW50IDpBdmFpbGFibGVTcGFjZSIgL2Rldi9zdGRpbiA8PDwgIiRkaXNrSW5mb1BsaXN0IiAyPi9kZXYvbnVsbAogICAgKQoKICAgICMjIFRoZSBmcmVlIHNwYWNlIGNhbGN1bGF0aW9uIGFsc28gaW5jbHVkZXMgdGhlIGluc3RhbGxlciwgc28gaXQgaXMgZXhjbHVkZWQuCiAgICBpZiBbIC1lICIkaW5zdGFsbGVyUGF0aCIgXTsgdGhlbgogICAgICAgIGluc3RhbGxlclNpemVCeXRlcz0kKC91c3IvYmluL2R1IC1zICIkaW5zdGFsbGVyUGF0aCIgfCAvdXNyL2Jpbi9hd2sgJ3twcmludCAkMX0nIHwgL3Vzci9iaW4veGFyZ3MpCiAgICAgICAgZnJlZVNwYWNlPSQoKGZyZWVTcGFjZSArIGluc3RhbGxlclNpemVCeXRlcykpCiAgICBmaQoKICAgICMjIENoZWNrIGlmIGZyZWUgc3BhY2UgPiAxNUdCIChpbnN0YWxsIDEwLjEzKSBvciAyMEdCIChpbnN0YWxsIDEwLjE0KykKICAgIHJlcXVpcmVkRGlza1NwYWNlU2l6ZUdCPSQoWyAiJGluc3RhbGxlck1ham9yIiAtZ2UgMTQgXSAmJiAvYmluL2VjaG8gIjIwIiB8fCAvYmluL2VjaG8gIjE1IikKICAgIGlmIFtbICR7ZnJlZVNwYWNlJS4qfSAtZ2UgJCgoIHJlcXVpcmVkRGlza1NwYWNlU2l6ZUdCICogMTAwMCAqIDEwMDAgKiAxMDAwICkpIF1dOyB0aGVuCiAgICAgICAgL2Jpbi9lY2hvICJEaXNrIENoZWNrOiBPSyAtICR7ZnJlZVNwYWNlJS4qfSBCeXRlcyBGcmVlIFNwYWNlIERldGVjdGVkIgogICAgZWxzZQogICAgICAgIHN5c1JlcXVpcmVtZW50RXJyb3JzKz0oIkhhcyBhdCBsZWFzdCAke3JlcXVpcmVkRGlza1NwYWNlU2l6ZUdCfUdCIG9mIEZyZWUgU3BhY2UiKQogICAgICAgIC9iaW4vZWNobyAiRGlzayBDaGVjazogRVJST1IgLSAke2ZyZWVTcGFjZSUuKn0gQnl0ZXMgRnJlZSBTcGFjZSBEZXRlY3RlZCIKICAgIGZpCn0KCnZlcmlmeUNoZWNrc3VtKCkgewojICAgIGlmIFsgLW4gIiRpbnN0YWxsRVNEQ2hlY2tzdW0iIF07IHRoZW4KIyAgICAgICAgb3NDaGVja3N1bT0kKCAvc2Jpbi9tZDUgLXEgIiRPU0luc3RhbGxlci9Db250ZW50cy9TaGFyZWRTdXBwb3J0L0luc3RhbGxFU0QuZG1nIiApCiMgICAgICAgIGlmIFsgIiRvc0NoZWNrc3VtIiA9ICIkaW5zdGFsbEVTRENoZWNrc3VtIiBdOyB0aGVuCiMgICAgICAgICAgICAvYmluL2VjaG8gIkNoZWNrc3VtOiBWYWxpZCIKIyAgICAgICAgICAgIHZhbGlkQ2hlY2tzdW09MQojICAgICAgICAgICAgcmV0dXJuCiMgICAgICAgIGVsc2UKIyAgICAgICAgICAgIC9iaW4vZWNobyAiQ2hlY2tzdW06IE5vdCBWYWxpZCIKIyMgICAgICAgICAgICAvYmluL2VjaG8gIkJlZ2lubmluZyBuZXcgZG93bG9hZCBvZiBpbnN0YWxsZXIiCiMjICAgICAgICAgICAgL2Jpbi9ybSAtcmYgIiRPU0luc3RhbGxlciIKIyAgICAgICAgICAgIC9iaW4vc2xlZXAgMgojICAgICAgICAgICAgZG93bmxvYWRJbnN0YWxsZXIKIyAgICAgICAgZmkKIyAgICBlbHNlCiMgICAgICAgICMjIENoZWNrc3VtIG5vdCBzcGVjaWZpZWQgYXMgc2NyaXB0IGFyZ3VtZW50LCBhc3N1bWUgdHJ1ZQojICAgICAgICB2YWxpZENoZWNrc3VtPTEKICAgICAgICByZXR1cm4KIyAgICBmaQp9CgpjbGVhbkV4aXQoKSB7CiAgICBpZiBbIC1uICIkY2FmZmVpbmF0ZVBJRCIgXTsgdGhlbgogICAgICBraWxsX3Byb2Nlc3MgIiRjYWZmZWluYXRlUElEIgogICAgZmkKICAgICMjIFJlbW92ZSBTY3JpcHQKICAgIC9iaW4vcm0gLWYgIiRmaW5pc2hPU0luc3RhbGxTY3JpcHRGaWxlUGF0aCIKICAgIC9iaW4vcm0gLWYgIiRvc2luc3RhbGxlcnNldHVwZERhZW1vblNldHRpbmdzRmlsZVBhdGgiCiAgICAvYmluL3JtIC1mICIkb3NpbnN0YWxsZXJzZXR1cGRBZ2VudFNldHRpbmdzRmlsZVBhdGgiCiAgICBleGl0ICIkMSIKfQoKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwojIFNZU1RFTSBDSEVDS1MKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwoKIyMgQ2FmZmVpbmF0ZQovdXNyL2Jpbi9jYWZmZWluYXRlIC1kaXMgJgpjYWZmZWluYXRlUElEPSQhCgojIyBHZXQgQ3VycmVudCBVc2VyCmN1cnJlbnRVc2VyPSQoIC91c3IvYmluL3N0YXQgLWYgJVN1IC9kZXYvY29uc29sZSApCgojIyBDaGVjayBpZiBGaWxlVmF1bHQgRW5hYmxlZApmdlN0YXR1cz0kKCAvdXNyL2Jpbi9mZGVzZXR1cCBzdGF0dXMgfCAvdXNyL2Jpbi9oZWFkIC0xICkKCiMjIFJ1biBzeXN0ZW0gcmVxdWlyZW1lbnQgY2hlY2tzCnZhbGlkYXRlX3Bvd2VyX3N0YXR1cwp2YWxpZGF0ZV9mcmVlX3NwYWNlICIkaW5zdGFsbGVyVmVyc2lvbk1ham9yIiAiJE9TSW5zdGFsbGVyIgoKIyMgRG9uJ3Qgd2FzdGUgdGhlIHVzZXJzIHRpbWUsIGV4aXQgaGVyZSBpZiBzeXN0ZW0gcmVxdWlyZW1lbnRzIGFyZSBub3QgbWV0CmlmIFtbICIkeyNzeXNSZXF1aXJlbWVudEVycm9yc1tAXX0iIC1nZSAxIF1dOyB0aGVuCiAgICAvYmluL2VjaG8gIkxhdW5jaGluZyBqYW1mSGVscGVyIERpYWxvZyAoUmVxdWlyZW1lbnRzIE5vdCBNZXQpLi4uIgogICAgL0xpYnJhcnkvQXBwbGljYXRpb25cIFN1cHBvcnQvSkFNRi9iaW4vamFtZkhlbHBlci5hcHAvQ29udGVudHMvTWFjT1MvamFtZkhlbHBlciAtd2luZG93VHlwZSB1dGlsaXR5IC10aXRsZSAiJHRpdGxlIiAtaWNvbiAiJGVycm9ySWNvbiIgLWhlYWRpbmcgIlJlcXVpcmVtZW50cyBOb3QgTWV0IiAtZGVzY3JpcHRpb24gIldlIHdlcmUgdW5hYmxlIHRvIHByZXBhcmUgeW91ciBjb21wdXRlciBmb3IgJG1hY09TbmFtZS4gUGxlYXNlIGVuc3VyZSB5b3VyIGNvbXB1dGVyIG1lZXRzIHRoZSBmb2xsb3dpbmcgcmVxdWlyZW1lbnRzOgokKCAvdXNyL2Jpbi9wcmludGYgJ1x04oCiICVzXG4nICIke3N5c1JlcXVpcmVtZW50RXJyb3JzW0BdfSIgKQpJZiB5b3UgY29udGludWUgdG8gZXhwZXJpZW5jZSB0aGlzIGlzc3VlLCBwbGVhc2UgY29udGFjdCB0aGUgSVQgU3VwcG9ydCBDZW50ZXIuIiAtaWNvblNpemUgMTAwIC1idXR0b24xICJPSyIgLWRlZmF1bHRCdXR0b24gMQoKICAgIGNsZWFuRXhpdCAxCmZpCgojIyBDaGVjayBmb3IgZXhpc3RpbmcgT1MgaW5zdGFsbGVyCiNsb29wQ291bnQ9MAojd2hpbGUgWyAiJGxvb3BDb3VudCIgLWx0IDMgXTsgZG8KIyAgICBpZiBbIC1lICIkT1NJbnN0YWxsZXIiIF07IHRoZW4KIyAgICAgICAgL2Jpbi9lY2hvICIkT1NJbnN0YWxsZXIgZm91bmQsIGNoZWNraW5nIHZlcnNpb24uIgojICAgICAgICBjdXJyZW50SW5zdGFsbGVyVmVyc2lvbj0kKC91c3IvbGliZXhlYy9QbGlzdEJ1ZGR5IC1jICdQcmludCA6IlN5c3RlbSBJbWFnZSBJbmZvIjp2ZXJzaW9uJyAiJE9TSW5zdGFsbGVyL0NvbnRlbnRzL1NoYXJlZFN1cHBvcnQvSW5zdGFsbEluZm8ucGxpc3QiKQojICAgICAgICAvYmluL2VjaG8gIkZvdW5kIG1hY09TIGluc3RhbGxlciBmb3IgdmVyc2lvbiAkY3VycmVudEluc3RhbGxlclZlcnNpb24uIgojICAgICAgICBpZiBbICIkY3VycmVudEluc3RhbGxlclZlcnNpb24iID0gIiRpbnN0YWxsZXJWZXJzaW9uIiBdOyB0aGVuCiMgICAgICAgICAgICAvYmluL2VjaG8gIkluc3RhbGxlciBmb3VuZCwgdmVyc2lvbiBtYXRjaGVzLiBWZXJpZnlpbmcgY2hlY2tzdW0uLi4iCiMgICAgICAgICAgICB2ZXJpZnlDaGVja3N1bQojICAgICAgICBlbHNlCiMgICAgICAgICAgICAjIyBEZWxldGUgb2xkIHZlcnNpb24uCiMgICAgICAgICAgICAvYmluL2VjaG8gIkluc3RhbGxlciBmb3VuZCwgYnV0IG9sZC4gRGVsZXRpbmcuLi4iCiMgICAgICAgICAgICAvYmluL3JtIC1yZiAiJE9TSW5zdGFsbGVyIgojICAgICAgICAgICAgL2Jpbi9zbGVlcCAyCiMgICAgICAgICAgICBkb3dubG9hZEluc3RhbGxlcgojICAgICAgICBmaQojICAgICAgICBpZiBbICIkdmFsaWRDaGVja3N1bSIgLWVxIDEgXTsgdGhlbgojICAgICAgICAgICAgdW5zdWNjZXNzZnVsRG93bmxvYWQ9MAojICAgICAgICAgICAgYnJlYWsKIyAgICAgICAgZmkKIyAgICBlbHNlCiMgICAgICAgIGRvd25sb2FkSW5zdGFsbGVyCiMgICAgZmkKIyAgICB1bnN1Y2Nlc3NmdWxEb3dubG9hZD0xCiMgICAgKChsb29wQ291bnQrKykpCiNkb25lCgojaWYgWyAiJHVuc3VjY2Vzc2Z1bERvd25sb2FkIiAtZXEgMSBdOyB0aGVuCiMgICAgL2Jpbi9lY2hvICJtYWNPUyBJbnN0YWxsZXIgRG93bmxvYWRlZCAzIFRpbWVzIC0gQ2hlY2tzdW0gaXMgTm90IFZhbGlkIgojICAgIC9iaW4vZWNobyAiUHJvbXB0aW5nIHVzZXIgZm9yIGVycm9yIGFuZCBleGl0aW5nLi4uIgojICAgIC9MaWJyYXJ5L0FwcGxpY2F0aW9uXCBTdXBwb3J0L0pBTUYvYmluL2phbWZIZWxwZXIuYXBwL0NvbnRlbnRzL01hY09TL2phbWZIZWxwZXIgLXdpbmRvd1R5cGUgdXRpbGl0eSAtdGl0bGUgIiR0aXRsZSIgLWljb24gIiRlcnJvckljb24iIC1oZWFkaW5nICJFcnJvciBEb3dubG9hZGluZyAkbWFjT1NuYW1lIiAtZGVzY3JpcHRpb24gIldlIHdlcmUgdW5hYmxlIHRvIHByZXBhcmUgeW91ciBjb21wdXRlciBmb3IgJG1hY09TbmFtZS4gUGxlYXNlIGNvbnRhY3QgdGhlIElUIFN1cHBvcnQgQ2VudGVyLiIgLWljb25TaXplIDEwMCAtYnV0dG9uMSAiT0siIC1kZWZhdWx0QnV0dG9uIDEKIyAgICBjbGVhbkV4aXQgMAojZmkKCiMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMKIyBDUkVBVEUgRklSU1QgQk9PVCBTQ1JJUFQKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwoKL2Jpbi9ta2RpciAtcCAvdXNyL2xvY2FsL2phbWZwcwoKL2Jpbi9jYXQgPDwgRU9GID4gIiRmaW5pc2hPU0luc3RhbGxTY3JpcHRGaWxlUGF0aCIKIyEvYmluL2Jhc2gKIyMgRmlyc3QgUnVuIFNjcmlwdCB0byByZW1vdmUgdGhlIGluc3RhbGxlci4KIyMgQ2xlYW4gdXAgZmlsZXMKL2Jpbi9ybSAtZnIgIiRPU0luc3RhbGxlciIKIyMgVXBkYXRlIERldmljZSBJbnZlbnRvcnkKL3Vzci9sb2NhbC9qYW1mL2Jpbi9qYW1mIHJlY29uCiMjIFJlbW92ZSBMYXVuY2hBZ2VudCBhbmQgTGF1bmNoRGFlbW9uCi9iaW4vcm0gLWYgIiRvc2luc3RhbGxlcnNldHVwZEFnZW50U2V0dGluZ3NGaWxlUGF0aCIKL2Jpbi9ybSAtZiAiJG9zaW5zdGFsbGVyc2V0dXBkRGFlbW9uU2V0dGluZ3NGaWxlUGF0aCIKIyMgUmVtb3ZlIFNjcmlwdAovYmluL3JtIC1mciAvdXNyL2xvY2FsL2phbWZwcwpleGl0IDAKRU9GCgovdXNyL3NiaW4vY2hvd24gcm9vdDphZG1pbiAiJGZpbmlzaE9TSW5zdGFsbFNjcmlwdEZpbGVQYXRoIgovYmluL2NobW9kIDc1NSAiJGZpbmlzaE9TSW5zdGFsbFNjcmlwdEZpbGVQYXRoIgoKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwojIExBVU5DSCBEQUVNT04KIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwoKL2Jpbi9jYXQgPDwgRU9GID4gIiRvc2luc3RhbGxlcnNldHVwZERhZW1vblNldHRpbmdzRmlsZVBhdGgiCjw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9IlVURi04Ij8+CjwhRE9DVFlQRSBwbGlzdCBQVUJMSUMgIi0vL0FwcGxlLy9EVEQgUExJU1QgMS4wLy9FTiIgImh0dHA6Ly93d3cuYXBwbGUuY29tL0RURHMvUHJvcGVydHlMaXN0LTEuMC5kdGQiPgo8cGxpc3QgdmVyc2lvbj0iMS4wIj4KPGRpY3Q+CiAgICA8a2V5PkxhYmVsPC9rZXk+CiAgICA8c3RyaW5nPmNvbS5qYW1mcHMuY2xlYW51cE9TSW5zdGFsbDwvc3RyaW5nPgogICAgPGtleT5Qcm9ncmFtQXJndW1lbnRzPC9rZXk+CiAgICA8YXJyYXk+CiAgICAgICAgPHN0cmluZz4vYmluL2Jhc2g8L3N0cmluZz4KICAgICAgICA8c3RyaW5nPi1jPC9zdHJpbmc+CiAgICAgICAgPHN0cmluZz4kZmluaXNoT1NJbnN0YWxsU2NyaXB0RmlsZVBhdGg8L3N0cmluZz4KICAgIDwvYXJyYXk+CiAgICA8a2V5PlJ1bkF0TG9hZDwva2V5PgogICAgPHRydWUvPgo8L2RpY3Q+CjwvcGxpc3Q+CkVPRgoKIyMgU2V0IHRoZSBwZXJtaXNzaW9uIG9uIHRoZSBmaWxlIGp1c3QgbWFkZS4KL3Vzci9zYmluL2Nob3duIHJvb3Q6d2hlZWwgIiRvc2luc3RhbGxlcnNldHVwZERhZW1vblNldHRpbmdzRmlsZVBhdGgiCi9iaW4vY2htb2QgNjQ0ICIkb3NpbnN0YWxsZXJzZXR1cGREYWVtb25TZXR0aW5nc0ZpbGVQYXRoIgoKIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwojIExBVU5DSCBBR0VOVCBGT1IgRklMRVZBVUxUIEFVVEhFTlRJQ0FURUQgUkVCT09UUwojICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjCmlmIFsgIiRjYW5jZWxGVkF1dGhSZWJvb3QiIC1lcSAwIF07IHRoZW4KICAgICMjIERldGVybWluZSBQcm9ncmFtIEFyZ3VtZW50CiAgICBpZiBbICIkaW5zdGFsbGVyVmVyc2lvbk1ham9yIiAtZ2UgMTEgXTsgdGhlbgogICAgICAgIHByb2dBcmd1bWVudD0ib3NpbnN0YWxsZXJzZXR1cGQiCiAgICBlbGlmIFsgIiRpbnN0YWxsZXJWZXJzaW9uTWFqb3IiIC1lcSAxMCBdOyB0aGVuCiAgICAgICAgcHJvZ0FyZ3VtZW50PSJvc2luc3RhbGxlcnNldHVwcGxhaW5kIgogICAgZmkKCiAgICAvYmluL2NhdCA8PCBFT1AgPiAiJG9zaW5zdGFsbGVyc2V0dXBkQWdlbnRTZXR0aW5nc0ZpbGVQYXRoIgo8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJVVEYtOCI/Pgo8IURPQ1RZUEUgcGxpc3QgUFVCTElDICItLy9BcHBsZS8vRFREIFBMSVNUIDEuMC8vRU4iICJodHRwOi8vd3d3LmFwcGxlLmNvbS9EVERzL1Byb3BlcnR5TGlzdC0xLjAuZHRkIj4KPHBsaXN0IHZlcnNpb249IjEuMCI+CjxkaWN0PgogICAgPGtleT5MYWJlbDwva2V5PgogICAgPHN0cmluZz5jb20uYXBwbGUuaW5zdGFsbC5vc2luc3RhbGxlcnNldHVwZDwvc3RyaW5nPgogICAgPGtleT5MaW1pdExvYWRUb1Nlc3Npb25UeXBlPC9rZXk+CiAgICA8c3RyaW5nPkFxdWE8L3N0cmluZz4KICAgIDxrZXk+TWFjaFNlcnZpY2VzPC9rZXk+CiAgICA8ZGljdD4KICAgICAgICA8a2V5PmNvbS5hcHBsZS5pbnN0YWxsLm9zaW5zdGFsbGVyc2V0dXBkPC9rZXk+CiAgICAgICAgPHRydWUvPgogICAgPC9kaWN0PgogICAgPGtleT5UaW1lT3V0PC9rZXk+CiAgICA8aW50ZWdlcj4zMDA8L2ludGVnZXI+CiAgICA8a2V5Pk9uRGVtYW5kPC9rZXk+CiAgICA8dHJ1ZS8+CiAgICA8a2V5PlByb2dyYW1Bcmd1bWVudHM8L2tleT4KICAgIDxhcnJheT4KICAgICAgICA8c3RyaW5nPiRPU0luc3RhbGxlci9Db250ZW50cy9GcmFtZXdvcmtzL09TSW5zdGFsbGVyU2V0dXAuZnJhbWV3b3JrL1Jlc291cmNlcy8kcHJvZ0FyZ3VtZW50PC9zdHJpbmc+CiAgICA8L2FycmF5Pgo8L2RpY3Q+CjwvcGxpc3Q+CkVPUAoKICAgICMjIFNldCB0aGUgcGVybWlzc2lvbiBvbiB0aGUgZmlsZSBqdXN0IG1hZGUuCiAgICAvdXNyL3NiaW4vY2hvd24gcm9vdDp3aGVlbCAiJG9zaW5zdGFsbGVyc2V0dXBkQWdlbnRTZXR0aW5nc0ZpbGVQYXRoIgogICAgL2Jpbi9jaG1vZCA2NDQgIiRvc2luc3RhbGxlcnNldHVwZEFnZW50U2V0dGluZ3NGaWxlUGF0aCIKCmZpCgojICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjCiMgQVBQTElDQVRJT04KIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIyAjICMgIwoKIyMgTGF1bmNoIGphbWZIZWxwZXIKamFtZkhlbHBlclBJRD0iIgppZiBbICIkdXNlckRpYWxvZyIgLWVxIDAgXTsgdGhlbgogICAgL2Jpbi9lY2hvICJMYXVuY2hpbmcgamFtZkhlbHBlciBhcyBGdWxsU2NyZWVuLi4uIgogICAgL0xpYnJhcnkvQXBwbGljYXRpb25cIFN1cHBvcnQvSkFNRi9iaW4vamFtZkhlbHBlci5hcHAvQ29udGVudHMvTWFjT1MvamFtZkhlbHBlciAtd2luZG93VHlwZSBmcyAtdGl0bGUgIiIgLWljb24gIiRpY29uIiAtaGVhZGluZyAiJGhlYWRpbmciIC1kZXNjcmlwdGlvbiAiJGRlc2NyaXB0aW9uIiAmCiAgICBqYW1mSGVscGVyUElEPSQhCmVsc2UKICAgIC9iaW4vZWNobyAiTGF1bmNoaW5nIGphbWZIZWxwZXIgYXMgVXRpbGl0eSBXaW5kb3cuLi4iCiAgICAvTGlicmFyeS9BcHBsaWNhdGlvblwgU3VwcG9ydC9KQU1GL2Jpbi9qYW1mSGVscGVyLmFwcC9Db250ZW50cy9NYWNPUy9qYW1mSGVscGVyIC13aW5kb3dUeXBlIHV0aWxpdHkgLXRpdGxlICIkdGl0bGUiIC1pY29uICIkaWNvbiIgLWhlYWRpbmcgIiRoZWFkaW5nIiAtZGVzY3JpcHRpb24gIiRkZXNjcmlwdGlvbiIgLWljb25TaXplIDEwMCAmCiAgICBqYW1mSGVscGVyUElEPSQhCmZpCgojIyBMb2FkIExhdW5jaEFnZW50CmlmIFsgIiRmdlN0YXR1cyIgPSAiRmlsZVZhdWx0IGlzIE9uLiIgXSAmJiBcCiAgIFsgIiRjdXJyZW50VXNlciIgIT0gInJvb3QiIF0gJiYgXAogICBbICIkY2FuY2VsRlZBdXRoUmVib290IiAtZXEgMCBdIDsgdGhlbgogICAgdXNlcklEPSQoIC91c3IvYmluL2lkIC11ICIke2N1cnJlbnRVc2VyfSIgKQogICAgL2Jpbi9sYXVuY2hjdGwgYm9vdHN0cmFwIGd1aS8iJHt1c2VySUR9IiAvTGlicmFyeS9MYXVuY2hBZ2VudHMvY29tLmFwcGxlLmluc3RhbGwub3NpbnN0YWxsZXJzZXR1cGQucGxpc3QKZmkKCiMjIFNldCByZXF1aXJlZCBzdGFydG9zaW5zdGFsbCBvcHRpb25zCnN0YXJ0b3NpbnN0YWxsT3B0aW9ucys9KAoiLS1hZ3JlZXRvbGljZW5zZSIKIi0tbm9pbnRlcmFjdGlvbiIKIi0tcGlkdG9zaWduYWwgJGphbWZIZWxwZXJQSUQiCikKCiMjIFNldCB2ZXJzaW9uIHNwZWNpZmljIHN0YXJ0b3NpbnN0YWxsIG9wdGlvbnMKI2lmIFsgIiRpbnN0YWxsZXJWZXJzaW9uTWFqb3IiIC1sdCAxNCBdOyB0aGVuCiAgICAjIFRoaXMgdmFyaWFibGUgbWF5IGhhdmUgc3BhY2UuIFRoZXJlZm9yZSwgZXNjYXBlIHZhbHVlIHdpdGggZHVibGUgcXVvdGF0aW9uCiMgICAgc3RhcnRvc2luc3RhbGxPcHRpb25zKz0oIi0tYXBwbGljYXRpb25wYXRoIFwiJE9TSW5zdGFsbGVyXCIiKQojZmkKCiMjIENoZWNrIGlmIGVyYXNlSW5zdGFsbCBpcyBFbmFibGVkCmlmIFsgIiRlcmFzZUluc3RhbGwiIC1lcSAxIF07IHRoZW4KICAgIHN0YXJ0b3NpbnN0YWxsT3B0aW9ucys9KCItLWVyYXNlaW5zdGFsbCIpCiAgICAvYmluL2VjaG8gIlNjcmlwdCBpcyBjb25maWd1cmVkIGZvciBFcmFzZSBhbmQgSW5zdGFsbCBvZiBtYWNPUy4iCmZpCgojIyBCZWdpbiBVcGdyYWRlCnN0YXJ0b3NpbnN0YWxsQ29tbWFuZD0iXCIkT1NJbnN0YWxsZXIvQ29udGVudHMvUmVzb3VyY2VzL3N0YXJ0b3NpbnN0YWxsXCIgJHtzdGFydG9zaW5zdGFsbE9wdGlvbnNbKl19ID4+ICRvc2luc3RhbGxMb2dmaWxlIDI+JjEgJiIKL2Jpbi9lY2hvICJSdW5uaW5nIGEgY29tbWFuZCBhcyAnJHN0YXJ0b3NpbnN0YWxsQ29tbWFuZCcuLi4iCmV2YWwgIiRzdGFydG9zaW5zdGFsbENvbW1hbmQiCgovYmluL3NsZWVwIDMKCmNsZWFuRXhpdCAw</script_contents_encoded>
</script>